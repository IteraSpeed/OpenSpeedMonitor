<h1>
  {{ 'frontend.de.iteratec.osm.jobResult.title' | translate }}
</h1>
<p class="description">
  {{ 'frontend.de.iteratec.osm.jobResult.description' | translate }}
</p>

<div class="card">
  <div class="col-sm-3 job-selection ">
    <label for="select-job">
      <strong>{{ 'frontend.de.iteratec.osm.jobResult.select.label.job' | translate }}</strong>
    </label>
    <ng-select [(ngModel)]="selectedJob" (change)="setJob(selectedJob)" [items]="jobs"
               clearAllText="{{ 'frontend.de.iteratec.osm.jobResult.select.clearAll' | translate }}"
               id="select-job"
               loadingText="{{ 'frontend.de.iteratec.osm.jobResult.select.loading' | translate }}"
               notFoundText="{{ 'frontend.de.iteratec.osm.jobResult.select.notFound' | translate }}"
               placeholder="{{ 'frontend.de.iteratec.osm.jobResult.select.placeholder' | translate }}"
               typeToSearchText="{{ 'frontend.de.iteratec.osm.jobResult.select.search' | translate }}">
    </ng-select>
  </div>

  <div *ngIf="selectedJob && jobResults.length === 0"
       class="col-sm-12">{{ 'frontend.de.iteratec.osm.jobResult.noData' | translate }}</div>

  <table *ngIf="jobResults.length > 0" class="table table-striped">
    <thead>
    <tr>
      <th (click)="sort('date')" class="sortable">
        <div>
          {{ 'frontend.de.iteratec.osm.jobResult.tableHead.date' | translate }}
          <i *ngIf="currentSortingRule.column === 'date' && currentSortingRule.direction === 'desc'"
             aria-hidden="true" class="fas fa-sort-down"></i>
          <i *ngIf="currentSortingRule.column === 'date' && currentSortingRule.direction === 'asc'"
             aria-hidden="true" class="fas fa-sort-up"></i>
        </div>
        <div class="job-id-table-head">
          {{ 'frontend.de.iteratec.osm.jobResult.tableHead.testId' | translate }}
        </div>
      </th>
      <th>
        <span (click)="sort('testAgent')" class="sortable">
          {{ 'frontend.de.iteratec.osm.jobResult.tableHead.testAgent' | translate }}
          <i *ngIf="currentSortingRule.column === 'testAgent' && currentSortingRule.direction === 'desc'"
             aria-hidden="true" class="fas fa-sort-down"></i>
          <i *ngIf="currentSortingRule.column === 'testAgent' && currentSortingRule.direction === 'asc'"
             aria-hidden="true" class="fas fa-sort-up"></i>
        </span>
        <input [placeholder]="('frontend.de.iteratec.osm.jobResult.tableHead.filter' | translate)" class="form-control input-filter"
               type="text">
      </th>
      <th>
        <span (click)="sort('jobResultStatus')" class="sortable">
          {{ 'frontend.de.iteratec.osm.jobResult.tableHead.jobResultStatus' | translate }}
          <i *ngIf="currentSortingRule.column === 'jobResultStatus' && currentSortingRule.direction === 'desc'"
             aria-hidden="true" class="fas fa-sort-down"></i>
          <i *ngIf="currentSortingRule.column === 'jobResultStatus' && currentSortingRule.direction === 'asc'"
             aria-hidden="true" class="fas fa-sort-up"></i>
        </span>
        <input [placeholder]="('frontend.de.iteratec.osm.jobResult.tableHead.filter' | translate)" class="form-control input-filter"
               type="text">
      </th>
      <th>
        <span (click)="sort('wptStatus')" class="sortable">
          {{ 'frontend.de.iteratec.osm.jobResult.tableHead.wptStatus' | translate }}
          <i *ngIf="currentSortingRule.column === 'wptStatus' && currentSortingRule.direction === 'desc'"
             aria-hidden="true" class="fas fa-sort-down"></i>
          <i *ngIf="currentSortingRule.column === 'wptStatus' && currentSortingRule.direction === 'asc'"
             aria-hidden="true" class="fas fa-sort-up"></i>
        </span>
        <input [placeholder]="('frontend.de.iteratec.osm.jobResult.tableHead.filter' | translate)" class="form-control input-filter"
               type="text">
      </th>
      <th>
        <span (click)="sort('description')" class="sortable">
          {{ 'frontend.de.iteratec.osm.jobResult.tableHead.description' | translate }}
          <i *ngIf="currentSortingRule.column === 'description' && currentSortingRule.direction === 'desc'"
             aria-hidden="true" class="fas fa-sort-down"></i>
          <i *ngIf="currentSortingRule.column === 'description' && currentSortingRule.direction === 'asc'"
             aria-hidden="true" class="fas fa-sort-up"></i>
        </span>
        <input [placeholder]="('frontend.de.iteratec.osm.jobResult.tableHead.filter' | translate)" class="form-control input-filter"
               type="text">
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let test of jobResults">
      <td>
        <a [class.job-status-error]="!isTestSuccessful(test)" [class.text-success]="isTestSuccessful(test)"
           href="{{ test.testUrl }}">
          <div
            class="job-date">{{ test.date | date:('frontend.de.iteratec.osm.jobResult.dateFormat' | translate) }}</div>
          <div class="job-id">{{ test.testId }}</div>
        </a>

      </td>
      <td>{{ test.testAgent ? test.testAgent : '-' }}</td>
      <td>{{ test.jobResultStatus }}</td>
      <td>{{ test.wptStatus }}</td>
      <td>{{ test.description }}</td>
    </tr>
    </tbody>
  </table>
</div>
